<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Memos</title>
<meta name=keywords content><meta name=description content="Posts - Memos"><meta name=author content="HCY"><link rel=canonical href=https://hcy-asleep.github.io/post/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.bbe7c693ba1e57651eda5c9f7653fe0f608bca43c4b67d413bde2747e48dd912.css integrity="sha256-u+fGk7oeV2Ue2lyfdlP+D2CLykPEtn1BO94nR+SN2RI=" rel="preload stylesheet" as=style><link rel=icon href=https://raw.githubusercontent.com/HCY-ASLEEP/picture-bed/main/picture-bed/hcy_site_favicon.png><link rel=icon type=image/png sizes=16x16 href=https://raw.githubusercontent.com/HCY-ASLEEP/picture-bed/main/picture-bed/hcy_site_favicon.png><link rel=icon type=image/png sizes=32x32 href=https://raw.githubusercontent.com/HCY-ASLEEP/picture-bed/main/picture-bed/hcy_site_favicon.png><link rel=apple-touch-icon href=https://raw.githubusercontent.com/HCY-ASLEEP/picture-bed/main/picture-bed/hcy_site_favicon.png><link rel=mask-icon href=https://raw.githubusercontent.com/HCY-ASLEEP/picture-bed/main/picture-bed/hcy_site_favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://hcy-asleep.github.io/post/index.xml><link rel=alternate hreflang=zh href=https://hcy-asleep.github.io/post/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><style>@media screen and (min-width:1px){.post-content input[type=checkbox]:checked~label>img{transform:scale(1.6);cursor:zoom-out;position:relative;z-index:999}.post-content img.zoomCheck{transition:transform .15s ease;z-index:999;cursor:zoom-in}}</style><meta property="og:title" content="Posts"><meta property="og:description" content="Welcome"><meta property="og:type" content="website"><meta property="og:url" content="https://hcy-asleep.github.io/post/"><meta property="og:image" content="https://hcy-asleep.github.io/"><meta property="og:site_name" content="HCY-BLOGS"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://hcy-asleep.github.io/"><meta name=twitter:title content="Posts"><meta name=twitter:description content="Welcome"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://hcy-asleep.github.io/post/"}]}</script></head><body class=list id=top><header class=header><nav class=nav><div class=logo><a href=https://hcy-asleep.github.io/ accesskey=h title="主页 (Alt + H)">主页</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://hcy-asleep.github.io/archives/ title=归档><span>归档</span></a></li><li><a href=https://hcy-asleep.github.io/tags/ title=标签><span>标签</span></a></li><li><a href=https://hcy-asleep.github.io/categories/ title=目录><span>目录</span></a></li><li><a href=https://hcy-asleep.github.io/friends/ title=友链><span>友链</span></a></li><li><a href=https://hcy-asleep.github.io/about/ title=关于><span>关于</span></a></li><li><a href=https://hcy-asleep.github.io/search/ title="🔍 (Alt + /)" accesskey=/><span>🔍</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://hcy-asleep.github.io/>主页</a></div><h1>Posts
<a href=/post/index.xml title=RSS aria-label=RSS><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Linux磁盘占用分析</h2></header><div class=entry-content><p>前几天服务器又宕机了，仔细排查原来是磁盘的占用满了，在这里记录一下使用到的命令以及相关小知识 在 linux shell 里面查看磁盘占用信息主要有两个命令，一个是 du ，另外一个是 df
du 和 df 的区别 du : disk usage
主要用于递归计算指定文件夹的大小
它通过搜索文件来计算每个文件的大小然后累加，只能看到当前存在的，没有被删除的文件
使用 du - sh 可以显示当前目录的总磁盘使用量，并且以易读的格式（如 K、M、G）显示
-s 或 --summarize：只显示总计的磁盘使用量，而不是列出每个子目录的详细使用量，也就是说，它会显示当前目录（或指定目录）的总大小，而不是列出每个子目录的大小 -h 或 --human-readable：以更易读的格式显示磁盘使用量，例如以 K（千字节）、M（兆字节）、G（吉字节）等单位显示，而不是以字节为单位 而du -h可以查看当前目录下所有文件和子目录的大小 df : disk free
df命令则是通过文件系统来快速获取空间大小的信息（如硬盘、分区、挂载点等），用于检查整个文件系统或分区的大小，而不可以做到像 du 那样子针对某一个目录的大小进行分析 当删除一个文件时，该文件并不会立即在文件系统中消失，而是暂时消失，直到所有程序都不再使用它时，才会根据操作系统的规则释放掉。df命令记录的是通过文件系统获取到的文件大小，包括已经删除但尚未释放的文件，因此在某些情况下比du命令显示的空间要大。当文件系统也确定删除了该文件后，du和df显示的空间大小会一致。使用df -h 可以以易读的格式显示磁盘空间和使用情况。使用示例:</p></div><footer class=entry-footer><span title='2024-11-25 19:27:02 +0000 UTC'>十一月 25, 2024</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;43 字&nbsp;·&nbsp;HCY</footer><a class=entry-link aria-label="post link to Linux磁盘占用分析" href=https://hcy-asleep.github.io/Linux%E7%A3%81%E7%9B%98%E5%8D%A0%E7%94%A8%E5%88%86%E6%9E%90/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>SPEC CPU2006安装使用避坑</h2></header><div class=entry-content><p>安装 网上找到的版本应该是这个speccpu2006-v1.0.1-newest.tar，在想要安装的目录下执行tar -xvf speccpu2006-v1.0.1-newest.tar就可以解压安装 进入到目录里面cd speccpu2006-v1.0.1 安装 spec ，./install.sh，如果安装出现错误，极有可能是有一些文件没有可执行文件，递归赋予可执行文件就行chmod -R a+x .，不会有问题的 安装完成之后执行./shrc激活spec环境（以后每次重新打开一个 shell 会话的时候都需要激活一下） 构成 SPEC有两个部分组成，一个是数据，一个是代码（代码以项目的方式组织），运行需要指定数据以及项目 数据有三个规格 test（小型） train（中型） ref（大型） 代码有以下选项 int（整型运算性能） float，也叫 fp（浮点运算性能） all_c（全部 c 项目） all_cpp（全部 cpp 项目） all（全部项目） 特定项目，比如 453.povray 编译标准 C 语言要使用 -std=gnu89 CPP 要使用 -std=c++98 如果要启用 address sanitizer，要注意防止 sanitizer 检测到错误的时候 abort 程序而导致 benchmark 提前终止，需要使用以下编译选项 1 -fsanitize=address -fsanitize-recover=address 并且要注入环境变量ASAN_OPTIONS=halt_on_error=0:detect_leaks=0 配制 运行 spec 需要指定配制，在配制文件里面要声明 reportable = 1 才可以有结果输出
运行模式 spec 有两种运行模式，一个是 base ，基本模式，一般使用这个，一个是 peak ，性能模式，测试峰值性能极限
...</p></div><footer class=entry-footer><span title='2024-11-17 21:34:26 +0000 UTC'>十一月 17, 2024</span>&nbsp;·&nbsp;9 分钟&nbsp;·&nbsp;1762 字&nbsp;·&nbsp;HCY</footer><a class=entry-link aria-label="post link to SPEC CPU2006安装使用避坑" href=https://hcy-asleep.github.io/SPEC-CPU2006%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%E9%81%BF%E5%9D%91/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Online LaTex2HTML Converter By Mathjax</h2></header><div class=entry-content><p>Enter LaTeX Formula 👇 Generated HTML Code 👇 🖱️👉 copy code 👈🖱️</p></div><footer class=entry-footer><span title='2024-11-08 14:44:13 +0000 UTC'>十一月 8, 2024</span>&nbsp;·&nbsp;1 分钟&nbsp;·&nbsp;12 字&nbsp;·&nbsp;HCY</footer><a class=entry-link aria-label="post link to Online LaTex2HTML Converter By Mathjax" href=https://hcy-asleep.github.io/Online-LaTex2HTML-Converter-By-Mathjax/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>性能分析备忘录</h2></header><div class=entry-content><p>Perf Debian 安装 perf 1 sudo apt install linux-perf 收集分支预测事件 1 perf stat -e branch-instructions,branch-misses &lt;your_program> branch-instructions：分支指令的总数 branch-misses：分支预测失败的次数 1 hit_rate = 1 - branch-misses / branch-instructions //命中率 以下是一个包含多个复杂分支跳转的 C 语言程序示例。这个程序包含了多层嵌套的条件判断、循环和函数调用，以演示复杂的分支逻辑
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 #include &lt;stdio.h> #include &lt;stdlib.h> #include &lt;time.h> // 模拟复杂条件的函数 int complex_condition(int x) { if (x % 2 == 0) { if (x % 3 == 0) { return 1; // 可被2和3整除 } else { if (x % 5 == 0) { return 2; // 可被2和5整除 } else { return 3; // 可被2整除，但不能被3或5整除 } } } else { if (x % 7 == 0) { return 4; // 可被7整除 } else { return 5; // 不能被2或7整除 } } } // 递归函数，模拟复杂的分支跳转 int recursive_function(int depth) { if (depth &lt;= 0) { return 0; } else { if (depth % 2 == 0) { return depth * recursive_function(depth - 1); } else { return depth + recursive_function(depth - 1); } } } // 主函数，包含多重循环和分支判断 int main() { srand(time(NULL)); // 用当前时间作为随机数种子 // 模拟分支跳转 for (int i = 0; i &lt; 20; i++) { int rand_num = rand() % 100 + 1; // 生成1到100之间的随机数 int result = complex_condition(rand_num); switch (result) { case 1: printf("Number %d is divisible by 2 and 3.\n", rand_num); break; case 2: printf("Number %d is divisible by 2 and 5.\n", rand_num); break; case 3: printf("Number %d is divisible by 2, but not by 3 or 5.\n", rand_num); break; case 4: printf("Number %d is divisible by 7.\n", rand_num); break; case 5: printf("Number %d is not divisible by 2 or 7.\n", rand_num); break; default: printf("Unexpected result for number %d.\n", rand_num); break; } } // 递归调用，模拟更复杂的分支 int depth = rand() % 10 + 1; printf("\nRecursive function result for depth %d: %d\n", depth, recursive_function(depth)); return 0; } 编译之后，使用 perf 进行分支预测事件统计得到结果：
...</p></div><footer class=entry-footer><span title='2024-11-06 17:31:59 +0000 UTC'>十一月 6, 2024</span>&nbsp;·&nbsp;6 分钟&nbsp;·&nbsp;1105 字&nbsp;·&nbsp;HCY</footer><a class=entry-link aria-label="post link to 性能分析备忘录" href=https://hcy-asleep.github.io/%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%A4%87%E5%BF%98%E5%BD%95/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>SoK: Sanitizing for Security 论文结构梳理</h2></header><div class=entry-content><p>Abstract I. Inctrodcution II. Exploit Mitigations vs. Sanitizers III. Low-Level Vulnerabilities A. Memory Safety Violations (1) Spatial Safety Violatoins (2) Temporal Safety Violations B. Use of Uninitialized Variables C. Pointer Type Errors D. Variadic Function Misuse E. Other Vulnerabilities IV. Bug Finding Techiques A. Memory Safety Violations Location-based Access Checkers Identity-based Access Checkers (1) Spatial Memory Safety Violations Red-zone Insertion Guard Pages Per-pointer Bounds Tracking Per-object Bounds Tracking (2) Temporal Memory Safety Violations Reuse Delay Lock-and-key Dangling Pointer Tagging B. Use of Uninitailized Variables Uninitailized Memory Read Detection Uninitialized Value Use Dectection C. Pointer Type Errors Pointer Casting Monitor Pointer Use Monitor D. Variadic Function Misuse Dangerous Format String Detection Argument Mismatch Detection E. Other Vulnerabilities V. Program Instumentation A. Language-level Instrumentation B. IR-level Instrumentation C. Binary Instrumentation D. Library Interposition VI. Metadata Management A. Object Metadata Embedded Metadata Direct-mapped Shadow Multi-level Shadow Custom Data Structure B. Pointer Metadata Fat Pointers Tagged Pointers Disjoint Metadata C. Static Metadata VII. Driving A Sanitizer VIII. Analysis A. False Positives B. False Negatives C. Incomplete Instrumentation D. Tread Safety E. Performance Overhead F. Memory Overhead IX. Deployment A. Methodology Popular Github repositories Sanitizer web pages Search trends B. Findings AddressSanitizer is the most widely adopted sanitizer The adoption rate for other LLVM-based sanitizers is lower C. Deployment Directions X. Future Research And Development Directions A. Type Error Detection B. Improving Compatibility C. Composing Sanitizers D. Hardware Support E. Kernel and Bare-Metal Support XI. Conclusion</p></div><footer class=entry-footer><span title='2024-10-22 16:30:00 +0000 UTC'>十月 22, 2024</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;241 字&nbsp;·&nbsp;HCY</footer><a class=entry-link aria-label="post link to SoK: Sanitizing for Security 论文结构梳理" href=https://hcy-asleep.github.io/SoK-Sanitizing-for-Security-%E8%AE%BA%E6%96%87%E7%BB%93%E6%9E%84%E6%A2%B3%E7%90%86/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://hcy-asleep.github.io/post/page/2/>下一页&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2024 <a href=https://hcy-asleep.github.io/>Memos</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>